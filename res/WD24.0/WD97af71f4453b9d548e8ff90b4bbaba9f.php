<?php
//24.0.30.0 FMK/Date.php GF
//VersionVI: 01F240077f
//(c) 2005-2012 PC SOFT - Release
 define('FMK_Date',true); if (!defined('__INC__FMK/Chaine.php')) { define('__INC__FMK/Chaine.php',true); include_once(WB_INCLUDE_PATH.'WD55acb2e708e26f23cb8956cd93e98123.php'); } define('FMK_DATE_SANS_EXTENSION_CALENDAR',(!function_exists('gregoriantojd'))); if (FMK_DATE_SANS_EXTENSION_CALENDAR) { if (!defined('__INC__IHM/Champ/Calendrier/DateTime.php')) { define('__INC__IHM/Champ/Calendrier/DateTime.php',true); include_once(WB_INCLUDE_PATH.'WD8a3f9ea956942dad24d3a1c8d98a8330.php'); } } define('FormatDureeMillieme','+JHHMMSSLLL'); define('FormatDureeCentieme','+JHHMMSSLL'); define('FormatAnneeMoisJour','AAAAMMJJ'); define('FormatHeureMinuteSeconde','HHMMSS'); define('dureeMillieme',0); define('dureeCentieme',1); define("FormatDateAnnee","AAAA"); define("FormatDateAnneeUS","YYYY"); define("FormatDateAnnee2","AA"); define("FormatDateAnnee2US","YY"); define("FormatDateMoisUnique","M"); define("FormatDateMois","MM"); define("FormatDateMoisLettre","MMMM"); define("FormatDateMoisLettreMaj","MMMm"); define("FormatDateMoisAbrege","MMM"); define("FormatDateMoisAbregeMaj","MMm"); define("FormatDateJourUnique","J"); define("FormatDateJourUniqueUS","D"); define("FormatDateJour","JJ"); define("FormatDateJourUS","DD"); define("FormatDateJourLettreMaj","JJJj"); define("FormatDateJourLettre","JJJJ"); define("FormatDateJourLettreUS","DDDD"); define("FormatDateJourLettreUSMaj","DDDd"); define("FormatDateJourAbrege","JJJ"); define("FormatDateJourAbregeMaj","JJj"); define("FormatDateJourAbregeUS","DDD"); define("FormatDateJourAbregeUSMaj","DDd"); define("FormatDate1ereLettreJourMaj","L"); define("SeparateurDate","/"); define("FormatDateDefaut",FormatDateJour . SeparateurDate . FormatDateMois . SeparateurDate . FormatDateAnnee); define("FormatHeureHeure","HH"); define("FormatHeureHeureCourt","H"); define("FormatHeureMinute","MM"); define("FormatHeureSeconde","SS"); define("FormatHeureCentieme","CC"); define("FormatHeureAP","AP"); define("NbMicroParCentieme",10000); define("NbMicroParMilli",1000); define("NbCentiemeParSeconde",100); define("NbSecondeParMinute",60); define("NbCentiemeParMinute",(NbSecondeParMinute * NbCentiemeParSeconde)); define("NbMinuteParHeure",60); define("NbCentiemeParHeure",(NbCentiemeParMinute * NbMinuteParHeure)); define("NbHeureParJour",24); define("NbSecondeParJour",(NbSecondeParMinute * NbMinuteParHeure * NbHeureParJour)); define("NbCentiemeParJour",(NbCentiemeParHeure * NbHeureParJour)); define("NbJourParSemaine",7); define("NbMoisParAn",12); define("DebutAnneeDansDateHeure",0); define("TailleAnneeDansDateHeure",4); define("DebutAnnee2DansDateHeure",2); define("TailleAnnee2DansDateHeure",2); define("DebutMoisDansDateHeure",(DebutAnneeDansDateHeure + TailleAnneeDansDateHeure)); define("TailleMoisDansDateHeure",2); define("DebutJourDansDateHeure",(DebutMoisDansDateHeure + TailleMoisDansDateHeure)); define("TailleJourDansDateHeure",2); define("DebutHeureDansDateHeure",(DebutJourDansDateHeure + TailleJourDansDateHeure)); define("TailleHeureDansDateHeure",2); define("DebutMinuteDansDateHeure",(DebutHeureDansDateHeure + TailleHeureDansDateHeure)); define("TailleMinuteDansDateHeure",2); define("DebutSecondeDansDateHeure",(DebutMinuteDansDateHeure + TailleMinuteDansDateHeure)); define("TailleSecondeDansDateHeure",2); define("DebutCentiemeDansDateHeure",(DebutSecondeDansDateHeure + TailleSecondeDansDateHeure)); define("TailleCentiemeDansDateHeure",2); define("TailleDate",TailleAnneeDansDateHeure + TailleMoisDansDateHeure + TailleJourDansDateHeure); define("TailleHeure",TailleHeureDansDateHeure + TailleMinuteDansDateHeure + TailleSecondeDansDateHeure + TailleCentiemeDansDateHeure); define("TailleDateHeure",TailleDate + TailleHeure); define("DebutHeureDansHeure",0); define("DebutMinuteDansHeure",(DebutHeureDansHeure + TailleHeureDansDateHeure)); define("DebutSecondeDansHeure",(DebutMinuteDansHeure + TailleMinuteDansDateHeure)); define("DebutCentiemeDansHeure",(DebutSecondeDansHeure + TailleSecondeDansDateHeure)); define("ChaineFormatDateHeureAnnee","%04d"); define("ChaineFormatDateHeureMois","%02d"); define("ChaineFormatDateHeureJour","%02d"); define("ChaineFormatDateHeureHeure","%02d"); define("ChaineFormatDateHeureHeureSeconde",(ChaineFormatDateHeureHeure . "%02d%02d")); define("ChaineFormatDateHeureCentieme","%02d"); define("ChaineFormatDateHeureMilli","%03d"); define("ChaineFormatDateHeureHeureCentieme",(ChaineFormatDateHeureHeureSeconde . ChaineFormatDateHeureCentieme)); define("SeparateurHeure",":"); define("FormatHeureDefaut",FormatHeureHeure . SeparateurHeure . FormatHeureMinute . SeparateurHeure . FormatHeureSeconde . SeparateurHeure . FormatHeureCentieme); define("HeureAMPM",12); define("AnneeDepartDateHeure",1800); define("MoisDepartDateHeure",1); define("JourDepartDateHeure",1); define("NumeroJourDepart",1); define("NumeroPremierJourSemaine",1); define("NumeroPremierMois",1); define("JourSemaineDepartDateHeure",2); define("AnneePassageGregorien",1582); define("MoisPassageGregorien",10); define("JourPassageGregorien",4); define("PremierJourGregorien",15); define("TailleAnneeAvecPivot",2); define("AnneePivot",50); define("DebutAnneeSur2AvantPivot","20"); define("DebutAnneeSur2ApresPivot","19"); define("PartieDateHeureAnnee","year"); define("PartieDateHeureMois","mon"); define("PartieDateHeureJour","mday"); define("PartieDateHeureHeure","hours"); define("PartieDateHeureMinute","minutes"); define("PartieDateHeureSeconde","seconds"); define("JourBasculeNumeroSemaine",4); define("NbLettreAbrege",3); $TAB_JOURS_MOIS = null; function Fdfbf2cfd($bBisextile=false) { global $TAB_JOURS_MOIS; if (!isset($TAB_JOURS_MOIS)) $TAB_JOURS_MOIS = array(31,28,31,30,31,30,31,31,30,31,30,31); $TAB_JOURS_MOIS[1] = ($bBisextile) ? 29 : 28; return $TAB_JOURS_MOIS; } class FMK_Date { var $m_nAnnee = 0; var $m_nMois = 0; var $m_nJour = 0; var $m_nHeure = 0; var $m_nMinute = 0; var $m_nSeconde = 0; var $m_nMilliseconde = 0; function FMK_Date($sChaine=null,$sFormat='AAAAMMJJHHmmssLLL',$bSourceSure=false){ $bAnneeNegative = false; $bMaskDateInternet = is_string($sChaine) && ($sFormat=='ISO8601' || $sFormat == "UseDateRFC3339" || $sFormat == "UseDateRFC3339UTC"); if($bMaskDateInternet) { if ($sChaine[0]=='-') { $sChaine=substr($sChaine,1); $bAnneeNegative=true; } $sMilliseconde=''; if (substr($sChaine,19)=='.') { $nPosP = strpos($sChaine,'+',19); $nPosM = strpos($sChaine,'-',19); $nPosZ = strpos($sChaine,'Z',19); if ($nPosM===false && $nPosP===false && $nPosZ===false ) $sMilliseconde = intval(substr($sChaine,20,3)); else { $nPosFin = $nPosZ; if ($nPosFin===false || $nPosP<$nPosFin) $nPosFin=$nPosP; if ($nPosFin===false || $nPosM<$nPosFin) $nPosFin=$nPosM; $sMilliseconde = intval(substr($sChaine,20,20-$nPosFin)); } } $sChaine = (($sFormat == "UseDateRFC3339UTC") ? gmdate('YmdHis',strtotime($sChaine)) : date('YmdHis',strtotime($sChaine))) . str_pad($sMilliseconde ,3,'0',STR_PAD_RIGHT); $sFormat = 'AAAAMMJJHHmmssLLL'; } else { if (($sFormat=='') || (!is_numeric($sChaine))){ $sChaine = date('Ymd'); $sFormat = FormatAnneeMoisJour; $bSourceSure=true; } } switch(true) { case $bSourceSure && $sFormat===FormatAnneeMoisJour : $this->m_nAnnee = substr($sChaine,0,4); $this->m_nMois = substr($sChaine,4,2); $this->m_nJour = substr($sChaine,6,2); break; case $bSourceSure && $sFormat==='HHmmssLLL' : $this->m_nHeure = substr($sChaine,0,2); $this->m_nMinute = substr($sChaine,2,2); $this->m_nSeconde = substr($sChaine,4,2); $this->m_nMilliseconde = substr($sChaine,6,3); break; case $bSourceSure && $sFormat===FormatAnneeMoisJour.'HHmmssLLL' : $this->m_nAnnee = substr($sChaine,0,4); $this->m_nMois = substr($sChaine,4,2); $this->m_nJour = substr($sChaine,6,2); $this->m_nHeure = substr($sChaine,8,2); $this->m_nMinute = substr($sChaine,10,2); $this->m_nSeconde = substr($sChaine,12,2); $this->m_nMilliseconde = substr($sChaine,14,3); break; default: $this->m_nAnnee = ( (strpos($sFormat,FormatDateAnnee)===false) || (!is_numeric(substr($sChaine,strpos($sFormat,FormatDateAnnee),strlen(FormatDateAnnee)))) ) ? 0 : substr($sChaine,strpos($sFormat,FormatDateAnnee),strlen(FormatDateAnnee)); $this->m_nMois = ( (strpos($sFormat,FormatDateMois)===false) || (!is_numeric(substr($sChaine,strpos($sFormat,FormatDateMois),strlen(FormatDateMois)))) ) ? 0 : substr($sChaine,strpos($sFormat,FormatDateMois),strlen(FormatDateMois)); $this->m_nJour = ( (strpos($sFormat,FormatDateJour)===false) || (!is_numeric(substr($sChaine,strpos($sFormat,FormatDateJour),strlen(FormatDateJour)))) ) ? 0 : substr($sChaine,strpos($sFormat,FormatDateJour),strlen(FormatDateJour)); $this->m_nHeure = ( (strpos($sFormat,FormatHeureHeure)===false) || (!is_numeric(substr($sChaine,strpos($sFormat,FormatHeureHeure),strlen(FormatHeureHeure)))) ) ? 0 : substr($sChaine,strpos($sFormat,FormatHeureHeure),strlen(FormatHeureHeure)); $this->m_nMinute = ( (strpos($sFormat,'mm')===false) || (!is_numeric(substr($sChaine,strpos($sFormat,'mm'),2))) ) ? 0 : substr($sChaine,strpos($sFormat,'mm'),2); $this->m_nSeconde = ( (strpos($sFormat,'ss')===false) || (!is_numeric(substr($sChaine,strpos($sFormat,'ss'),2))) ) ? 0 : substr($sChaine,strpos($sFormat,'ss'),2); if ( (strpos($sFormat,'LLL')===false) && (strpos($sFormat,'LL')!==false) ) { $sFormat.='L'; $sChaine.='0'; } $this->m_nMilliseconde = ( (strpos($sFormat,'LLL')===false) || (!is_numeric(substr($sChaine,strpos($sFormat,'LLL'),3))) ) ? 0 : substr($sChaine,strpos($sFormat,'LLL'),3); } $this->m_nAnnee = intval($this->m_nAnnee) * ($bAnneeNegative ? -1 : 1); $this->m_nMois = intval($this->m_nMois); $this->m_nJour = intval($this->m_nJour); $this->m_nHeure = intval($this->m_nHeure); $this->m_nMinute = intval($this->m_nMinute); $this->m_nSeconde = intval($this->m_nSeconde); $this->m_nMilliseconde = intval($this->m_nMilliseconde); } function F265229a9($pDuree) { $bAutoriseFinMoisAuto=true; if (!is_object($pDuree) || (!(utf8_strcasecmp(get_class($pDuree),'FMK_Date_Duree')===0))) { $this->m_nMilliseconde += F075ca95b($pDuree); } else { $this->m_nMilliseconde += $pDuree->m_nMilliseconde; $this->m_nSeconde += $pDuree->m_nSeconde; $this->m_nMinute += $pDuree->m_nMinute; $this->m_nHeure += $pDuree->m_nHeure; $this->m_nJour += $pDuree->m_nJour; $this->m_nMois += $pDuree->m_nMois; $this->m_nAnnee += $pDuree->m_nAnnee; $bAutoriseFinMoisAuto=($pDuree->m_nJour==0); } $this->Ffae07732($bAutoriseFinMoisAuto); } function F805106da($pDuree) { $bAutoriseFinMoisAuto=true; if ((!is_object($pDuree)) || (!(utf8_strcasecmp(get_class($pDuree),'FMK_Date_Duree')===0))) { $this->m_nMilliseconde -= F075ca95b($pDuree); } else { $this->m_nMilliseconde -= $pDuree->m_nMilliseconde; $this->m_nSeconde -= $pDuree->m_nSeconde; $this->m_nMinute -= $pDuree->m_nMinute; $this->m_nHeure -= $pDuree->m_nHeure; $this->m_nJour -= $pDuree->m_nJour; $this->m_nMois -= $pDuree->m_nMois; $this->m_nAnnee -= $pDuree->m_nAnnee; $bAutoriseFinMoisAuto=($pDuree->m_nJour==0); } $this->Ffae07732($bAutoriseFinMoisAuto); } function Ffae07732($bAutoriseFinMoisAuto=true) { if ( ($this->m_nMilliseconde<0) ||($this->m_nMilliseconde>=1000)){ $nSecDePlus = floor($this->m_nMilliseconde/1000); $this->m_nSeconde+= $nSecDePlus; $this->m_nMilliseconde-= 1000*$nSecDePlus; } if (($this->m_nMilliseconde<0)&&($this->m_nSeconde>0)){ $this->m_nMilliseconde = 1000 - $this->m_nMilliseconde; } if (($this->m_nSeconde<0) ||($this->m_nSeconde>=60)){ $nMinDePlus = floor($this->m_nSeconde/60); $this->m_nMinute+= $nMinDePlus; $this->m_nSeconde-= 60*$nMinDePlus; } if (($this->m_nSeconde<0)&&($this->m_nMinute>0)){ $this->m_nSeconde = 60 - $this->m_nSeconde; } if (($this->m_nMinute<0) ||($this->m_nMinute>=60)){ $nHeureDePlus = floor($this->m_nMinute/60); $this->m_nHeure+= $nHeureDePlus; $this->m_nMinute-= 60*$nHeureDePlus; } if (($this->m_nMinute<0)&&($this->m_nHeure>0)){ $this->m_nMinute = 60 - $this->m_nMinute; } if (($this->m_nHeure<0) ||($this->m_nHeure>=24)){ $nJourDePlus = floor($this->m_nHeure/24); $this->m_nJour+= $nJourDePlus; $this->m_nHeure-= 24*$nJourDePlus; } if (($this->m_nHeure<0)&&($this->m_nJour>0)){ $this->m_nHeure = 60 - $this->m_nHeure; } while ($this->m_nMois<1) { $this->m_nAnnee--; $this->m_nMois+=12; } while ($this->m_nMois>12) { $this->m_nAnnee++; $this->m_nMois -= 12; } $tabJourParMois = Fdfbf2cfd($this->Fc2d9312d()); if ($bAutoriseFinMoisAuto && ($this->m_nJour>27) && ($this->m_nJour<32) && !$this->F97da59d7()) { $this->m_nJour=$tabJourParMois[$this->m_nMois-1]; } else { while ($this->m_nJour<1) { $this->m_nMois--; while ($this->m_nMois<1) { $this->m_nAnnee--; $tabJourParMois[1] = ($this->Fc2d9312d() ) ? 29 : 28; $this->m_nMois+=12; } $this->m_nJour = $tabJourParMois[$this->m_nMois-1] - abs($this->m_nJour); } while ( $this->m_nJour > $tabJourParMois[$this->m_nMois-1]) { $this->m_nJour -= $tabJourParMois[$this->m_nMois-1]; $this->m_nMois++; while ($this->m_nMois>12) { $this->m_nAnnee++; $tabJourParMois[1] = ($this->Fc2d9312d() ) ? 29 : 28; $this->m_nMois -= 12; } } while ($this->m_nMois>12) { $this->m_nAnnee++; $this->m_nMois -= 12; } } } function getAnnee() { return $this->m_nAnnee; } function getMois() { return $this->m_nMois; } function getJour() { return $this->m_nJour; } function getHeure() { return $this->m_nHeure; } function getMinute() { return $this->m_nMinute; } function getSeconde() { return $this->m_nSeconde; } function getMilliseconde() { return $this->m_nMilliseconde; } function Ff24ae73f($nNbDigit = 4,$bStrict=false) { return F04e7ba0d(abs($this->m_nAnnee),$nNbDigit,$bStrict); } function F48243084($nNbDigit = 2,$bStrict=false) { return F04e7ba0d(abs($this->m_nMois),$nNbDigit,$bStrict); } function Faf9d9b0c($nNbDigit = 2,$bStrict=false) { return F04e7ba0d(abs($this->m_nJour),$nNbDigit,$bStrict); } function F387e0cb8($nNbDigit = 2,$bStrict=false) { return F04e7ba0d(abs($this->m_nHeure),$nNbDigit,$bStrict); } function F4dccb29e($nNbDigit = 2,$bStrict=false) { return F04e7ba0d(abs($this->m_nMinute),$nNbDigit,$bStrict); } function Fcf5775ce($nNbDigit = 2,$bStrict=false) { return F04e7ba0d(abs($this->m_nSeconde),$nNbDigit,$bStrict); } function F217e7cc7($nNbDigit = 3,$bStrict=false) { return F04e7ba0d(abs($this->m_nMilliseconde),$nNbDigit,$bStrict);} function setAnnee($p) { $this->m_nAnnee=$p; $this->Ffae07732(); } function setMois($p) { $this->m_nMois=$p; $this->Ffae07732(); } function setJour($p,$bAutoriseFinMoisAuto=false) { $this->m_nJour=$p; $this->Ffae07732($bAutoriseFinMoisAuto); } function setHeure($p) { $this->m_nHeure=$p; $this->Ffae07732($this->m_nHeure>=24); } function setMinute($p) { $this->m_nMinute=$p; $this->Ffae07732($this->m_nMinute>=24*60); } function setSeconde($p) { $this->m_nSeconde=$p; $this->Ffae07732($this->m_nSeconde>=24*60*60); } function setMilliseconde($p) { $this->m_nMilliseconde=$p; $this->Ffae07732($this->m_nMilliseconde>=24*60*60*1000); } function F70216f0f(){return $this->Ff24ae73f().$this->F48243084().$this->Faf9d9b0c();} function F663a1796(){return $this->F70216f0f().$this->F387e0cb8().$this->F4dccb29e().$this->Fcf5775ce();} function versChaine(){return $this->F663a1796().$this->F217e7cc7();} function Fa8f32ca1(){return Ffec7ff1b($this->F70216f0f());} function F778c5667(){ return mktime($this->getHeure(),$this->getMinute(),$this->getSeconde(),$this->getMois(),$this->getJour(),$this->getAnnee()); } function F6220aed2($fmkDate) { $nCompare = $this->F778c5667() - $fmkDate->F778c5667(); if ($nCompare !== 0) return ($nCompare>0) ? 1 : -1; if ($this->m_nMilliseconde === $fmkDate->m_nMilliseconde) return 0; return ($this->m_nMilliseconde > $fmkDate->m_nMilliseconde) ? 1 : -1; } function Fe8fc8ad8() { return $this->Ff24ae73f().$this->F48243084().$this->Faf9d9b0c(); } function Fff545aaa() { return $this->F387e0cb8().$this->F4dccb29e().$this->Fcf5775ce().$this->F217e7cc7(); } function F0a6804f3() { return $this->F387e0cb8().$this->F4dccb29e().$this->Fcf5775ce().$this->F217e7cc7(2,true); } function Ff6ae0492() { return $this->Fe8fc8ad8() . $this->Fff545aaa(); } function F680c1c4a() { return $this->Fe8fc8ad8() . $this->F0a6804f3(); } function F5d22ad0f($sFormat) { $sChaine = ''; $sDejaRempli = ''; $nLongueurFormat = utf8_strlen($sFormat); for($i=0; $i<$nLongueurFormat;$i++){ switch (utf8_substr($sFormat,$i,1)){ case 'A' : $cChar ='A'; if (utf8_strpos($sDejaRempli,$cChar)===false) { $nNb = utf8_substr_count($sFormat,$cChar); $sDejaRempli.=$cChar; $sChaine.=$this->Ff24ae73f($nNb); } break; case 'M' : $cChar ='M'; if (utf8_strpos($sDejaRempli,$cChar)===false) { $nNb = utf8_substr_count($sFormat,$cChar); $sDejaRempli.=$cChar; $sChaine.=$this->F48243084($nNb); } break; case 'J' : $cChar ='J'; if (utf8_strpos($sDejaRempli,$cChar)===false) { $nNb = utf8_substr_count($sFormat,$cChar); $sDejaRempli.=$cChar; $sChaine.=$this->Faf9d9b0c($nNb); } break; case 'H' : $cChar ='H'; if (utf8_strpos($sDejaRempli,$cChar)===false) { $nNb = utf8_substr_count($sFormat,$cChar); $sDejaRempli.=$cChar; $sChaine.=$this->F387e0cb8($nNb); } break; case 'm' : $cChar ='m'; if (utf8_strpos($sDejaRempli,$cChar)===false) { $nNb = utf8_substr_count($sFormat,$cChar); $sDejaRempli.=$cChar; $sChaine.=$this->F4dccb29e($nNb); } break; case 's' : $cChar ='s'; if (utf8_strpos($sDejaRempli,$cChar)===false) { $nNb = utf8_substr_count($sFormat,$cChar); $sDejaRempli.=$cChar; $sChaine.=$this->Fcf5775ce($nNb); } break; case 'L' : $cChar ='L'; if (utf8_strpos($sDejaRempli,$cChar)===false) { $nNb = utf8_substr_count($sFormat,$cChar); $sDejaRempli.=$cChar; $sChaine.=$this->F217e7cc7($nNb); } break; } } return $sChaine; } function Fc2d9312d() { return checkdate(2,29,$this->getAnnee()); } function F97da59d7(){ return F3c5ce664($this->Fe8fc8ad8()); } function Fc4c7c151() { return Fde803145(Ffec7ff1b($this->Fe8fc8ad8())); } }; $_FMK_Date = null; $_TabMois = null; function& Fcc7e85f2() { global $_TabMois; if (isset($_TabMois)) { return $_TabMois; } $_TabMois = F5ff9334d('MOIS'); if (isset($_TabMois)) { return $_TabMois; } $_TabMois = array(); $_TabMois[0] = Fc34ec142("MOIS0"); for ($i = 1; $i < NbMoisParAn; $i++) { $_TabMois[$i] = Fc34ec142("MOIS$i"); } return $_TabMois; } $_TabJourSemaine = null; function& F7d16a969() { global $_TabJourSemaine; if (isset($_TabJourSemaine)) { return $_TabJourSemaine; } $_TabJourSemaine = F5ff9334d('JOURSSEMAINE'); if (isset($_TabJourSemaine) && is_array($_TabJourSemaine))return $_TabJourSemaine; $_TabJourSemaine = array(); $_TabJourSemaine[0] = Fc34ec142('JOURSEMAINE0'); for ($i = 1; $i < NbJourParSemaine; $i++) { $_TabJourSemaine[$i] = Fc34ec142("JOURSEMAINE$i"); } return $_TabJourSemaine; } function Ff02489ac($nMois,$nAnnee) { $tabMoisAnnee = Fdfbf2cfd(F71dda8b1($nAnnee)); return $tabMoisAnnee[$nMois-1]; } function Fdaa64b0d() { $sDate = date("Ymd"); return $sDate; } function Fd443b7ac() { list($usec, $sec) = utf8_explode(" ", microtime()); return (((int)($usec*1000)) + ((double)$sec*1000)); } function F04e7ba0d($nParam, $nNbCaracteres = 2, $bStrict = false,$bDepuisDebut = true) { $sParam = $nParam.''; while (strlen($sParam) < $nNbCaracteres) $sParam = ($bDepuisDebut!==-1 ) ? '0'.$sParam : $sParam.'0'; if (substr($sParam,0,1)==='-') { $sParam = substr($sParam,1); } if ($bStrict) { if ($bDepuisDebut!==false) { return substr($sParam,0,$nNbCaracteres); } else { return substr($sParam,strlen($sParam)-$nNbCaracteres,$nNbCaracteres); } } else return $sParam; } function Fc1971e77($DateHeureDebut , $DateHeureFin) { $Difference = F0a38f5ec($DateHeureFin) - F0a38f5ec($DateHeureDebut); $NbJour = ($Difference / NbCentiemeParJour); $Difference = abs($Difference) - (floor(abs($NbJour)) * NbCentiemeParJour); return utf8_sprintf("%s%07d" . ChaineFormatDateHeureHeureCentieme, ($NbJour < 0) ? "-" : "+", abs($NbJour), ($Difference % NbCentiemeParJour) / NbCentiemeParHeure, ($Difference % NbCentiemeParHeure) / NbCentiemeParMinute, ($Difference % NbCentiemeParMinute) / NbCentiemeParSeconde, $Difference % NbCentiemeParSeconde); } function F0a38f5ec($DateHeure) { $DateHeure = F472c129e($DateHeure); $Annee = utf8_substr($DateHeure,DebutAnneeDansDateHeure,TailleAnneeDansDateHeure); $Mois = utf8_substr($DateHeure,DebutMoisDansDateHeure,TailleMoisDansDateHeure); $Jour = utf8_substr($DateHeure,DebutJourDansDateHeure,TailleJourDansDateHeure); $Heure = utf8_substr($DateHeure,DebutHeureDansDateHeure,TailleHeureDansDateHeure); $Minute = utf8_substr($DateHeure,DebutMinuteDansDateHeure,TailleMinuteDansDateHeure); $Seconde = utf8_substr($DateHeure,DebutSecondeDansDateHeure,TailleSecondeDansDateHeure); $Centieme = utf8_substr($DateHeure,DebutCentiemeDansDateHeure,TailleCentiemeDansDateHeure); if (!FMK_DATE_SANS_EXTENSION_CALENDAR) { $nDureeDate = ((((($Annee <= AnneePassageGregorien) && ($Mois <= MoisPassageGregorien) && ($Jour <= JourPassageGregorien)) ? juliantojd(intval($Mois),intval($Jour),intval($Annee)) : gregoriantojd(intval($Mois),intval($Jour),intval($Annee))) - gregoriantojd(MoisDepartDateHeure,JourDepartDateHeure,AnneeDepartDateHeure)) * NbCentiemeParJour); } else { F9e6cebad($Jour,$Mois,$Annee,$nDureeDate); } $nDureeHeures = ($Heure * NbCentiemeParHeure) + ($Minute * NbCentiemeParMinute) + ($Seconde * NbCentiemeParSeconde) + $Centieme; return $nDureeDate + $nDureeHeures; } function F1fafd2ef($Chaîne,$Taille) { return Fd06ac608($Chaîne,$Taille,"0"); } function F85189180($Heure) { return F1fafd2ef($Heure,TailleHeure); } function F472c129e($DateHeure) { return F1fafd2ef($DateHeure,TailleDateHeure); } function Ffec7ff1b($Date, $DepuisDebutAnnee = false) { if (FMK_DATE_SANS_EXTENSION_CALENDAR) { $DateHeure = F472c129e($Date); $Annee = utf8_substr($DateHeure,DebutAnneeDansDateHeure,TailleAnneeDansDateHeure); $Mois = utf8_substr($DateHeure,DebutMoisDansDateHeure,TailleMoisDansDateHeure); $Jour = utf8_substr($DateHeure,DebutJourDansDateHeure,TailleJourDansDateHeure); F9e6cebad($Jour,$Mois,$Annee,$nDureeDate); return $nDureeDate; } return ((F0a38f5ec($Date) - ($DepuisDebutAnnee ? F0a38f5ec(Fbd2cdc8b(utf8_substr($Date,DebutAnneeDansDateHeure,TailleAnneeDansDateHeure),MoisDepartDateHeure,JourDepartDateHeure)) : 0)) / NbCentiemeParJour) + NumeroJourDepart; } function Fbd2cdc8b($Annee,$Mois,$Jour) { return utf8_sprintf(ChaineFormatDateHeureAnnee . ChaineFormatDateHeureMois . ChaineFormatDateHeureJour,$Annee,$Mois,$Jour); } function F3c5ce664($Date) { if (strlen($Date)>TailleDate) { if (utf8_strlen($Date)-TailleDate<4) { return false; } if (!F647fe720(substr(utf8_trim($Date),TailleDate))) return false; $Date = substr(utf8_trim($Date),0,TailleDate); } if (utf8_strlen($Date) < TailleDate) { return false; } $Annee = intval(utf8_substr($Date,DebutAnneeDansDateHeure,TailleAnneeDansDateHeure)); $Mois = intval(utf8_substr($Date,DebutMoisDansDateHeure,TailleMoisDansDateHeure)); $Jour = intval(utf8_substr($Date,DebutJourDansDateHeure,TailleJourDansDateHeure)); if (!($dateResultat = checkdate($Mois,$Jour,$Annee) && (!(($Annee == AnneePassageGregorien) && ($Mois == MoisPassageGregorien) && ($Jour > JourPassageGregorien) && ($Jour < PremierJourGregorien))))){ return false; } else return $dateResultat; } function F647fe720($DateHeure) { if (strlen($DateHeure)==TailleHeure+1) $DateHeure=substr($DateHeure,0,TailleHeure); else if (strlen($DateHeure)==TailleDateHeure+1) $DateHeure=substr($DateHeure,0,TailleDateHeure); if (strlen($DateHeure)>TailleHeure) $DateHeure=substr($DateHeure,strlen($DateHeure)-TailleHeure); $DateHeure = F85189180($DateHeure); if (!preg_match('/'.ExpRegDebut . ExpRegDébutRépétition . ExpRegChiffre . ExpRegFinRépétition . ExpRegRepetition . ExpRegFin.'/',$DateHeure)) return false; $Heure = utf8_substr($DateHeure,DebutHeureDansHeure,TailleHeureDansDateHeure); $Minute = utf8_substr($DateHeure,DebutMinuteDansHeure,TailleMinuteDansDateHeure); $Seconde = utf8_substr($DateHeure,DebutSecondeDansHeure,TailleSecondeDansDateHeure); $Centieme = utf8_substr($DateHeure,DebutCentiemeDansHeure,TailleCentiemeDansDateHeure); return Fc83455d1($Heure) && (intval($Heure) < NbHeureParJour) && Fc83455d1($Minute) && (intval($Minute) < NbMinuteParHeure) && Fc83455d1($Seconde) && (intval($Seconde) < NbSecondeParMinute) && Fc83455d1($Centieme) && (intval($Centieme) < NbCentiemeParSeconde); } function F142f0517($Date) { $_TabMois =& Fcc7e85f2(); $Mois = (int)utf8_substr($Date,DebutMoisDansDateHeure,TailleMoisDansDateHeure); return (($Mois >= NumeroPremierMois) && ($Mois <= NbMoisParAn)) ? $_TabMois[(int)utf8_substr($Date,DebutMoisDansDateHeure,TailleMoisDansDateHeure) - NumeroPremierMois] : ""; } function Fd9b81f8e($DateJour, $PartieDate = "") { $JourJulien = F9614449b($DateJour); if (FMK_DATE_SANS_EXTENSION_CALENDAR) { $pJour=$pMois=$pAnnee=0; F02d2848a($DateJour,$pJour,$pMois,$pAnnee); $julian = $gregorian = utf8_str_pad($pMois ,2,'0',STR_PAD_LEFT). SeparateurDate . utf8_str_pad($pJour,2,'0',STR_PAD_LEFT) . SeparateurDate . utf8_str_pad($pAnnee ,4,'0',STR_PAD_LEFT); } else { $gregorian = jdtogregorian($JourJulien); $julian = jdtojulian($JourJulien); } $Date = utf8_explode(SeparateurDate,(Ffec7ff1b(Fbd2cdc8b(AnneePassageGregorien,MoisPassageGregorien,JourPassageGregorien)) < $DateJour) ? $gregorian : $julian); switch(utf8_strtoupper(utf8_substr($PartieDate,0,1))) { case utf8_substr(FormatDateAnnee,0,1): case utf8_substr(FormatDateAnneeUS,0,1): return utf8_sprintf(ChaineFormatDateHeureAnnee,$Date[2]); case utf8_substr(FormatDateMois,0,1): return utf8_sprintf(ChaineFormatDateHeureMois,$Date[0]); case utf8_substr(FormatDateJour,0,1): case utf8_substr(FormatDateJourUS,0,1): return utf8_sprintf(ChaineFormatDateHeureJour,$Date[1]); default: return Fbd2cdc8b($Date[2],$Date[0],$Date[1]); } } function F9614449b($DateJour) { if (FMK_DATE_SANS_EXTENSION_CALENDAR) { F9e6cebad(MoisDepartDateHeure,JourDepartDateHeure,AnneeDepartDateHeure,$nDureeDate); return $DateJour + $nDureeDate - NumeroJourDepart; } return $DateJour + gregoriantojd(MoisDepartDateHeure,JourDepartDateHeure,AnneeDepartDateHeure) - NumeroJourDepart; } function F2b663679($DateJour) { return F142f0517(Fd9b81f8e($DateJour)); } function F11ec46fa($DateJour) { $_TabJourSemaine =& F7d16a969(); return $_TabJourSemaine[Fde803145($DateJour) - NumeroPremierJourSemaine]; } function Fde803145($DateJour) { if (FMK_DATE_SANS_EXTENSION_CALENDAR) { $Jour = date('w'); } else { $Jour = jddayofweek(F9614449b($DateJour)); } return ($Jour < NumeroPremierJourSemaine) ? NbJourParSemaine : $Jour; } function F6226d5b6($Date) { $PremierJourSemaine = Ffec7ff1b($Date,true) - F875f6ed2($Date) + NbJourParSemaine; return (int)($PremierJourSemaine / NbJourParSemaine) + ((($PremierJourSemaine % NbJourParSemaine) > (JourBasculeNumeroSemaine - NumeroPremierJourSemaine)) ? 1 : 0); } function F875f6ed2($Date) { return Fde803145(Ffec7ff1b($Date)); } function F4f4d91fe($Heure) { if (strlen($Heure) >= TailleDateHeure) { $Heure = substr($Heure,TailleDate); } return F0a38f5ec(Fbd2cdc8b(AnneeDepartDateHeure,MoisDepartDateHeure,JourDepartDateHeure) . $Heure); } function Fc4670717($nAnne,&$nMois,&$nJour) { if($nAnne<=1582 || $nAnne>9999)return; $year2 = floor($nAnne + 5700000); $a = floor($year2 % 19); $b = floor($year2 / 100); $c = floor($year2 % 100); $d = floor($b / 4); $e = floor($b % 4); $f = floor(($b + 8) / 25); $g = floor(($b - $f + 1) / 3); $h = floor((19 * $a + $b - $d - $g + 15) % 30); $i = floor($c / 4); $k = floor($c % 4); $l = floor((32 + $e + $e + $i + $i - $h - $k) % 7); $m = floor(($a + 11 * $h + 22 * $l) / 451); $tval = floor($h + $l - 7 * $m + 114); $nMois = floor( $tval / 31 ); $nJour = floor( $tval % 31 + 1); } function Fd709d15c( $Heure, $Format) { if($Heure=='') return ''; $res = $Format; $j =utf8_strpos( $Format, 'HH'); if(is_integer($j)) $res = utf8_substr($res,0, $j) . utf8_substr($Heure,0,2) . utf8_substr($res, $j+2 ); $j =utf8_strpos( $Format, 'mm'); if(!is_integer($j)) $j = utf8_strpos( $Format, 'MM'); if(is_integer($j)) $res = utf8_substr($res,0, $j) . utf8_substr($Heure,2,2) . utf8_substr($res, $j+2 ); $j =utf8_strpos( $Format, 'SS'); if(is_integer($j)) $res = utf8_substr($res,0, $j) . utf8_substr($Heure,4,2) . utf8_substr($res, $j+2 ); $j =utf8_strpos( $Format, 'CC'); if(is_integer($j)) { $res = utf8_substr($res,0, $j) . utf8_substr($Heure,6,2) . utf8_substr($res, $j+2 ); if ( (utf8_strpos( $Format, 'CCC') === $j) && isset($res[$j+2]) && ($res[$j+2]==='C') ) { $res[$j+2] = (isset($Heure[8])) ? $Heure[8] : '0'; } } return $res; } ?>