<?php
//24.0.30.0 IHM/Champ/Saisie/Saisie.php GF
//VersionVI: 01F240077f
//(c) 2005-2012 PC SOFT - Release
 if (!defined('__INC__IHM/Champ/Champ.php')) { define('__INC__IHM/Champ/Champ.php',true); include_once(WB_INCLUDE_PATH.'WD7c939e6867492a5e5416bd4b4327fac0.php'); } if (!defined('__INC__WL/STD/Std.php')) { define('__INC__WL/STD/Std.php',true); include_once(WB_INCLUDE_PATH.'WD576dd879728a6f19b14108fc1d2e88ca.php'); } if (!defined('__INC__FMK/Dessin/Couleur.php')) { define('__INC__FMK/Dessin/Couleur.php',true); include_once(WB_INCLUDE_PATH.'WD2521e084cbaf10ef8d5f4ede4dc6baa2.php'); } IHM_Include('CListe'); class CSaisie extends CChamp { var $Masque; var $bChampFormate = false; var $m_bATTNULLSIVIDE = false; var $m_bATTMISEABLANC = false; var $m_sIndication; var $m_pclListeFaaSauveSaisie = null; var $m_bSaisieAssistee = false; var $m_nSaisieAssisteTailleMin = 0; var $m_cszValeurPourSaisieAssistee=''; var $m_nSaisieAssisteFiltre = 31979; var $m_bSaisieAssisteOuvertureAutomatique = true; var $m_bSaisieAssisteSansCasse = true; var $m_nSaisieAssisteDelai = 0; var $JetonActif=false; var $JetonAutoriseDoublon=false; var $JetonListeSeparateur=''; var $JetonSupprimable=true; var $m_tabJetons; var $m_pclCollection; function CSaisie() { parent::CChamp(); $this->Valeur = ''; $this->Masque = 0; $this->bTypeSaisieTexte = true; $this->m_tabJetons = array(); } function F12828e6d( $eTypeVue) { return $this->F0198de68('CVueChampSaisie_Web' , $eTypeVue); } function F56660bf0( $eTypeControleur) { if (!$this->JetonActif) return parent::F56660bf0($eTypeControleur); return $this->Fea7a1f04('CControleurChampSaisie_Web' , $eTypeControleur); } function lierVM($sNomVM, $sNomWL, $sNomPHP) { parent::lierVM($sNomVM, $sNomWL, $sNomPHP); if ($this->JetonActif) { $this->Fc9dbe781(); $this->m_pclCollection = new CDinoCollectionJeton(); $this->m_pclCollection->m_pclChamp =& $this; } } function Fd2c2cc01() { return false; } function SetATTNULLSIVIDE($b) { $this->m_bATTNULLSIVIDE = $b; $this->F21766077(); } function SetATTMISEABLANC($b) { $this->m_bATTMISEABLANC = $b; $this->F21766077(); } function Fdc05d49f( $ValeurHTTP ) { if ($this->JetonActif) return; $this->SetValeur($ValeurHTTP); } function& GetIndication() { return $this->m_sIndication; } function GetIndicationHTML() { return $this->GetIndication(); } function SetIndication($sIndication) { F67cfd262(); if (!is_string($sIndication)) { Fdd46bacf(FMK_ChaineConstruit(Fc34ec142("ERR_PROP_SET"),$sIndication,Fc34ec142("PROP_NOM_INDICATION"))); } else { $this->m_sIndication = $sIndication; if (Feef890d7()) { F4c16799e($this->m_sNomPHP,XML_CHAMP_PROP_NUM_INDICATION); } } } function SetValeur($NewVal) { $NewVal=(string)$NewVal; switch ($this->Masque) { case '2': $NewVal = utf8_strtoupper($NewVal); break; case '18': $NewVal = utf8_strtoupper(F03771b65($NewVal)); break; case '3': $NewVal = utf8_strtolower($NewVal); break; case '1': $NewVal = utf8_ucfirst($NewVal); break; default: ; } parent::SetValeur($NewVal); $this->F21766077(); } function& GetValeur() { $this->F21766077(); return $this->Valeur ; } function F21766077() { ; if (($this->GetType()!=20001) && $this->m_bATTMISEABLANC) { if ($this->Valeur == 0) { $this->Valeur = ''; } } if ($this->m_bATTNULLSIVIDE) { if ($this->Valeur == '') { $this->Valeur = null; } } if ($this->JetonActif) { $this->Fc9dbe781(); } } function F37bb1c9f($Valeur) { $this->Valeur = (string)($Valeur); $this->F21766077(); } function GetValeurHTML( $TypeConvertion = 0 ) { if ($TypeConvertion==2) return $this->GetValeurAffichee(); return utf8_htmlentities( $this->GetValeurAffichee() ); } function& GetType() { return getRef(20001); } function SetChampFormate($bChampFormate) { $this->bChampFormate = $bChampFormate; } function F4a917fa4() { if($this->bChampFormate) { return 10; } return 2; } function& Fccb308bb() { $sNomGlobal = uniqid($this->m_sNomPHP . '_'); $GLOBALS[$sNomGlobal] = null; $GLOBALS[$sNomGlobal]=&CreerChamp('CListe'); $pclListeFaaSauveSaisie =& $GLOBALS[$sNomGlobal]; global $MaPage; $MaPage->WB_AjouteChamp(($pclListeFaaSauveSaisie->Nom=uniqid($this->Nom)),uniqid('ALIAS'),$pclListeFaaSauveSaisie,$sNomGlobal); $pclListeFaaSauveSaisie->lierVM($MaPage->Nom,$pclListeFaaSauveSaisie->Nom,$sNomGlobal); $pclListeFaaSauveSaisie->m_bInterne = true; if (!empty($this->sFichierBase)) $pclListeFaaSauveSaisie->SetSourceRemplissage($this->sFichierBase,$this->sRubriqueBase,$this->sRubriqueBase,$this->sRubriqueBase,true,'',0); return $pclListeFaaSauveSaisie; } function& F4470825e() { return $this->m_pclListeFaaSauveSaisie; } function& F36eecfce() { if ($this->F4470825e() === null) { $this->m_pclListeFaaSauveSaisie =& $this->Fccb308bb(); } return $this->F4470825e(); } function F15eb06d2() { if (false !== $this->m_bSaisieAssistee) { $cszValeurPourSaisieAssistee = null; if (false === ($this->m_cszValeurPourSaisieAssistee=='')) { $cszValeurPourSaisieAssistee = $this->m_cszValeurPourSaisieAssistee; } else { $cszValeurPourSaisieAssistee = $this->Valeur; } if (utf8_strlen($cszValeurPourSaisieAssistee) < max($this->m_nSaisieAssisteTailleMin, 1)) return false; return (F4fc992ba($this)!==null) && !$this->bMultiLiaison && ($this->RubriqueLiaison->F0e4c65d4() || (isset($this->FichierLiaison)&&isset($this->FichierLiaison->bEstUneRequete)&&$this->FichierLiaison->bEstUneRequete)); } else { return false; } } function F05bc6f05($rcszValeurPourSaisieAssistee) { $this->m_cszValeurPourSaisieAssistee = $rcszValeurPourSaisieAssistee; $this->F36eecfce(); Fd057c510($this, CONTENU_WEB); } function Fdff5b8e3() { if (false !== $this->F15eb06d2()) { $clValeur = null; if (false === ($this->m_cszValeurPourSaisieAssistee=='')) { $clValeur = $this->m_cszValeurPourSaisieAssistee; $this->m_cszValeurPourSaisieAssistee=''; } else { $clValeur = $this->GetValeur(); } $pclChampListePourFaaSauveSaisie =& $this->F36eecfce(); if ($pclChampListePourFaaSauveSaisie->sValeurRecherche !== $clValeur) { $pclChampListePourFaaSauveSaisie->sValeurRecherche = $clValeur; if ($pclChampListePourFaaSauveSaisie->bInitLiaison) $pclChampListePourFaaSauveSaisie->ListeAffiche(); else $pclChampListePourFaaSauveSaisie->InitRemplissage(); } } } function F75f16a43() { $pclChampListePourFaaSauveSaisie =& $this->F36eecfce(); if (isset($pclChampListePourFaaSauveSaisie)) { return $pclChampListePourFaaSauveSaisie->ListeOccurrence(); } else { return 0; } } function pszGetContenuHTML() { return $this->F6107e7bd(false,true); } function F6107e7bd($bContenu, $bPropriete) { $sRetour = '<SAISIEA'; if (false !== $bPropriete) { $sRetour .= ' FILTRE="' . $this->m_nSaisieAssisteFiltre . '" OUVERTUREAUTO="' . $this->m_bSaisieAssisteOuvertureAutomatique . '" TAILLEMIN="' . $this->m_nSaisieAssisteTailleMin . '" DELAI="' . $this->m_nSaisieAssisteDelai . '" SANSCASSE="' . $this->m_bSaisieAssisteSansCasse . '"' ; } $sRetour .='>'; if (false !== $bContenu) { $pclChampListePourFaaSauveSaisie =& $this->F4470825e(); if (null !== $pclChampListePourFaaSauveSaisie) { $this->Fdff5b8e3(); $sRetour .= $pclChampListePourFaaSauveSaisie->Fec2dc3df(true,true); } } return $sRetour . '</SAISIEA>'; } function& GetJeton() { return $this->m_pclCollection; } function& GetJetonActif() { return $this->JetonActif; } function SetJetonActif($n) { Erreur('ErreurProprieteLectureSeule','',Fc34ec142("PROP_NOM_JETONACTIF"),F3b9ec4ca($this)); } function GetJetonActifHTML() { return $this->JetonActif; } function& GetJetonAutoriseDoublon() { return $this->JetonAutoriseDoublon; } function SetJetonAutoriseDoublon($n) { $this->JetonAutoriseDoublon = $n; } function GetJetonAutoriseDoublonHTML() { return $this->JetonAutoriseDoublon; } function& GetJetonSupprimable() { return $this->JetonSupprimable; } function SetJetonSupprimable($n) { $this->JetonSupprimable = $n; } function& GetJetonListeSeparateur() { return $this->JetonListeSeparateur; } function SetJetonListeSeparateur($n) { $this->JetonListeSeparateur = $n; } function GetJetonListeSeparateurHTML() { return $this->JetonListeSeparateur; } function Fc9dbe781() { if ($this->Valeur=='') return; $tabValeur = (utf8_explode(RC,$this->Valeur)); foreach ($tabValeur as $iValeur) { $pclDino = new CJetonDINO($iValeur); $this->Fcaa799aa($pclDino); } $this->Valeur=''; } function F7b15888b() { $sValeur = ''; foreach ($this->m_tabJetons as $key => $pclDinoJeton) { $sValeur = F5b2f2e5c(RC,$sValeur,$pclDinoJeton->GetValeur()); } $this->JetonActif=false; $this->SetValeur($sValeur); $this->JetonActif=true; } function Fcaa799aa(&$pclDinoJeton,$nPos=null) { if (!isset($nPos) || $nPos>count($this->m_tabJetons,COUNT_NORMAL)) { $this->m_tabJetons[] = $pclDinoJeton; } else if ($nPos<=1) { $this->m_tabJetons = array_merge(array(&$pclDinoJeton),$this->m_tabJetons); } else { array_splice ( $this->m_tabJetons, $nPos-1, 1, array(&$pclDinoJeton,&$this->m_tabJetons[$nPos-1]) ); } } function F29ec4ead($sValeur) { foreach ($this->m_tabJetons as $nPos => $pclDinoJeton) { if ($pclDinoJeton->GetValeur() == $sValeur || ($pclDinoJeton->GetValeur() == '' && $pclDinoJeton->GetLibelle() == $sValeur) ) { array_splice($this->m_tabJetons,$nPos-1,1); $this->F7b15888b(); return true; } } return false; } function F03be25c2($nIndice) { if (!isset($this->m_tabJetons[$nIndice])) return false; array_splice($this->m_tabJetons,$nIndice-1,1); $this->F7b15888b(); return true; } function JetonAjoute($sValeur,$sLibelle=null) { return $this->JetonInsere($this->JetonOccurrence()+1,$sValeur,$sLibelle); } function JetonAjouteDINO($pclDinoJeton) { return $this->F849b41d8($this->JetonOccurrence()+1,$pclDinoJeton); } function JetonInsere($nPos,$sValeur,$sLibelle=null) { if (!$this->JetonActif) return 0; if ($sValeur=='' && $sLibelle=='') return 0; $pclDino = new CJetonDINO($sValeur); if (isset($sLibelle)) { $pclDino->SetLibelle($sLibelle); } return $this->F849b41d8($nPos,$pclDino); } function F849b41d8($nPos,$pclDinoJeton) { if (!$this->JetonActif) return 0; if (!isset($pclDinoJeton) || !is_object($pclDinoJeton)) return false; $this->Fcaa799aa($pclDinoJeton,$nPos); $this->F7b15888b(); return $nPos; } function JetonOccurrence() { if (!$this->JetonActif) return 0; return count($this->m_tabJetons,COUNT_NORMAL); } function JetonSupprime($sValeur) { if (!$this->JetonActif) return false; if (is_numeric($sValeur) && $this->F03be25c2(intval($sValeur))) return true; return $this->F29ec4ead($sValeur); } function JetonSupprimeTout() { if (!$this->JetonActif) return false; $this->SetValeur(''); return true; } function SaisieAssisteeSupprimeTout() { Fd057c510($this, CONTENU_WEB); if (!isset($this->m_pclListeFaaSauveSaisie)) return; $this->m_pclListeFaaSauveSaisie->ListeSupprimeTout(); } function SaisieAssisteeAjoute($pszTexte) { Fd057c510($this, CONTENU_WEB); if ($this->F36eecfce() === null) return NUMLIGNE_INVALIDE; if (!isset($this->m_pclListeFaaSauveSaisie)) return NUMLIGNE_INVALIDE; $this->m_pclListeFaaSauveSaisie->ListeAjoute($pszTexte); return $this->m_pclListeFaaSauveSaisie->ListeOccurrence(); } function SaisieAssisteeParametre($nParametre, $pclValeur) { $bInterditSiSaisieAssisteeLiaisonDonnees = false; switch ($nParametre) { case 0: case 4: $bInterditSiSaisieAssisteeLiaisonDonnees = true; break; } $bErreurValeur = false; switch ($nParametre) { case 0: { $nFiltre = (false == $pclValeur) ? false : intval($pclValeur); if ((is_numeric($pclValeur) && ($nFiltre >= 31978) && ($nFiltre <= 31989)) || (false === $nFiltre)) { $this->m_nSaisieAssisteFiltre = $nFiltre; } else { $bErreurValeur = true; } } break; case 1: { if (is_bool($pclValeur)) { $this->m_bSaisieAssisteOuvertureAutomatique = (bool)$pclValeur; } else { $bErreurValeur = true; } } break; case 2: { $nTailleMin = intval($pclValeur); if (is_numeric($pclValeur) && $nTailleMin>=0) { $this->m_nSaisieAssisteTailleMin = $nTailleMin; } else { $bErreurValeur = true; } } break; case 3: { $nDelai = intval($pclValeur); if (is_numeric($pclValeur) && $nDelai>=0) { $this->m_nSaisieAssisteDelai = $nDelai; } else { $bErreurValeur = true; } } break; case 4: { if (is_bool($pclValeur)) { $this->m_bSaisieAssisteSansCasse = (bool)$pclValeur; } else { $bErreurValeur = true; } } break; default: Fb9eb0792('ERR_BAD_CONSTANT', $nParametre); return; } if (false !== $bErreurValeur) { Fb9eb0792('ERR_BAD_CONSTANT_STR', 3, (string)$pclValeur); return; } Fd057c510($this, PROP_INVALID_MIN); } } class CVueChampSaisie_Web extends CVueChamp_Web { function CVueChampSaisie_Web (&$pclModele) { parent::CVueChamp_Web($pclModele); } function F1f68ed08($clPropCodeHTML,&$rclResultat,&$rpczResultatStatique) { switch ($clPropCodeHTML->Fc30871c3()) { case PARTIE_CODEHTML_SAISIEASSISTEE_CONTENU: { $pclModele =& $this->m_pclModele; $pclModele->Fdff5b8e3(); $nNbElements = $pclModele->F75f16a43(); if ($nNbElements===0) return true; $clParametres = new CJSOn(); $pclListe =& $pclModele->F4470825e(); if ($pclListe==null) return true; for($nElement=1; $nElement<=$nNbElements; ++$nElement) { $eDernier = ($nElement<$nNbElements) ? DERNIER_NON : DERNIER_OUI; $pclLigne =& $pclListe->GetValI($nElement); $clParametres->Fba367465(null, $eDernier, ENCODAGE_CHAINE_HTML, $pclLigne->GetValeur()); } $rclResultat = $clParametres->F8b686221(); return true; } case PARTIE_CODEHTML_SAISIEASSISTEE_PARAMETRES: $this->Fe301d84b($rclResultat); return true; case PARTIE_CODEHTML_CHAMP_DATA: $rclResultat = $this->Fb1e0a2e4(); return true; default: return parent::F1f68ed08($clPropCodeHTML, $rclResultat, $rpczResultatStatique); } } function Fb1e0a2e4() { $pclModele =& $this->m_pclModele; $oJSON = new stdClass(); $oJSON->m_sJetonListeSeparateur = $pclModele->JetonListeSeparateur; $oJSON->m_bJetonAutoriseDoublon = $pclModele->JetonAutoriseDoublon; $oJSON->m_bJetonSupprimable = $pclModele->JetonSupprimable; $oJSON->m_tabJetons = array(); foreach ($pclModele->m_tabJetons as $key => $pclDinoJeton) { $oJeton = new stdClass(); $oJeton->m_sLibelle = $pclDinoJeton->m_cszLibelle; $oJeton->m_sBulle = $pclDinoJeton->m_cszBulle; $oJeton->m_sValeur = $pclDinoJeton->m_Valeur; $oJeton->m_sLibelleHTML = $pclDinoJeton->m_cszLibelleHTML; if (isset($pclDinoJeton->m_xpiCouleur) && $pclDinoJeton->m_xpiCouleur->m_Valeur>=0) $oJeton->m_sCouleur = $pclDinoJeton->m_xpiCouleur->F0162dfb3(); if (isset($pclDinoJeton->m_xpiCouleurFond) && $pclDinoJeton->m_xpiCouleurFond->m_Valeur>=0) $oJeton->m_sCouleurFond = $pclDinoJeton->m_xpiCouleurFond->F0162dfb3(); $oJSON->m_tabJetons[] = $oJeton; } return str_replace('"',"'", json_encode($oJSON)); } function Fe301d84b(&$rstValeur) { $pclModele =& $this->m_pclModele; $rstValeur = ( '.data("saisieassistee-' . 'filtre' . '",' . ($pclModele->m_nSaisieAssisteFiltre == false ? '0' : $pclModele->m_nSaisieAssisteFiltre) . ')' . '.data("saisieassistee-' . 'ouvertureauto' . '",' . ($pclModele->m_bSaisieAssisteOuvertureAutomatique ? '1' : '0') . ')' . '.data("saisieassistee-' . 'taillemin' . '",' . ($pclModele->m_nSaisieAssisteTailleMin) . ')' . '.data("saisieassistee-' . 'delai' . '",' . ($pclModele->m_nSaisieAssisteDelai) . ')' . '.data("saisieassistee-' . 'sanscasse' . '",' . ($pclModele->m_bSaisieAssisteSansCasse ? '1' : '0') . ')'); } } class CControleurChampSaisie_Web extends CControleurChamp_Web { function CControleurChampSaisie_Web ( &$pclModele) { parent::CControleurChamp_Web($pclModele); } function Fb29dfdd9($pszDonneesUTF8) { $pclVue =& $this->m_pclModele->m_pclVue; $pclModele =& $this->m_pclModele; $oJSON = json_decode(str_replace("'",'"',$pszDonneesUTF8)); if (!is_object($oJSON)) return; $pclModele->JetonListeSeparateur=$oJSON->m_sJetonListeSeparateur; $pclModele->JetonAutoriseDoublon=$oJSON->m_bJetonAutoriseDoublon; $pclModele->bJetonSupprimable=$oJSON->m_bJetonSupprimable; $pclModele->m_tabJetons = array(); foreach ($oJSON->m_tabJetons as $key => $oJeton) { $pclDinoJeton = new CJetonDINO(); if (isset($oJeton->m_sLibelle)) $pclDinoJeton->m_cszLibelle=$oJeton->m_sLibelle; $pclDinoJeton->m_cszBulle=$oJeton->m_sBulle; if (isset($oJeton->m_sValeur)) $pclDinoJeton->m_Valeur=$oJeton->m_sValeur; if (isset($oJeton->m_sLibelleHTML)) $pclDinoJeton->m_cszLibelleHTML=$oJeton->m_sLibelleHTML; if (isset($oJeton->m_sCouleur)) $pclDinoJeton->m_xpiCouleur = new CDINOCouleur($oJeton->m_sCouleur); if (isset($oJeton->m_sCouleurFond)) $pclDinoJeton->m_xpiCouleurFond = new CDINOCouleur($oJeton->m_sCouleurFond); $pclModele->Fcaa799aa($pclDinoJeton); } $pclModele->F7b15888b(); } } class CSaisieFormat extends CSaisie { var $FormatMemorise; var $FormatDefaut; function CSaisieFormat() { parent::CSaisie(); $this->FormatMemorise=null; $this->FormatDefaut=null; } function Fb560a68a($dwFlags) { parent::Fb560a68a($dwFlags); if ($this->FormatMemorise === '' && $this->Masque != '') { $this->FormatMemorise = $this->Masque; } } function F16d5955d() { return $this->GetValeurHTML(); } function& GetFormatMemorise() { return $this->FormatMemorise; } function SetFormatMemorise($sValeur) { $this->FormatMemorise = $sValeur; } function Fb9088766($pszMemorise) { } function F3355e5f9($pszValeur) { } function F301cc296($pszValeur) { } function F6e84afe6($pszAffichee) { } function Ff11ff472($xValeurAffichee) { if ($xValeurAffichee==='') return ''; if ($this->JetonActif) { $tabValeurAffichee = explode(RC,$xValeurAffichee); $tabValeurMemorisee = array(); foreach ($tabValeurAffichee as $xUneValeurAffichee) { $tabValeurMemorisee[] = $this->F3355e5f9($this->F6e84afe6($xUneValeurAffichee)); } return join(RC,$tabValeurMemorisee); } return $this->F3355e5f9($this->F6e84afe6($xValeurAffichee)); } function& GetValeurAffichee() { if ($this->Valeur==='') { $retour = ''; } else { if ($this->FormatMemorise == $this->Masque) { return $this->Valeur; } if ($this->Masque == szMASKDATEHEURE_DUREEERELATIVE) { $sFormatMem = $this->FormatMemorise; $this->FormatMemorise = 'AAAAMMJJHHmmSS'; } if ($this->JetonActif) { $tabValeurMemorisee = explode(RC,$xValeurAffichee); $tabValeurAffichee = array(); foreach ($tabValeurMemorisee as $xUneValeurMemorisee) { $tabValeurAffichee[] = $this->F301cc296($this->Fb9088766($xUneValeurMemorisee)); } $retour = join(RC,$tabValeurAffichee); } else $retour = $this->F301cc296($this->Fb9088766( $this->Valeur ) ); if ($this->Masque == szMASKDATEHEURE_DUREEERELATIVE) { $this->FormatMemorise = $sFormatMem; } } return $retour; } function Fdc05d49f( $ValeurHTTP ) { if ($ValeurHTTP=='') { $this->Valeur = ''; } else { if ($this->JetonActif) { $tabValeurAffichee = explode(RC,$ValeurHTTP); $tabValeur = array(); foreach ($tabValeurAffichee as $xUneValeurAffichee) { $tabValeur[] = $this->F6e84afe6($xUneValeurAffichee); } $retour = join(RC,$tabValeur); } else $this->Valeur = $this->F6e84afe6( $ValeurHTTP ); } $this->F21766077(); if ($this->Valeur!==null && $this->FormatMemorise != $this->FormatDefaut) { if ($this->JetonActif) { $tabValeur = explode(RC,$ValeurHTTP); $tabValeurMemorisee = array(); foreach ($tabValeur as $xUneValeur) { $tabValeurMemorisee[] = $this->F3355e5f9($xUneValeur); } $retour = join(RC,$tabValeurMemorisee); } else $this->Valeur = $this->F3355e5f9( $this->Valeur ); } } function SetValeur($sValeur) { parent::SetValeur($sValeur); $this->F21766077(); if(Feef890d7()) { F4c16799e($this->m_sNomPHP, XML_CHAMP_PROP_NUM_VALEURAFFICHEE); } } } class CSaisieDuree extends CSaisieFormat { var $Masque; function CSaisieDuree() { parent::CSaisieFormat(); $this->Masque = "+2J j HH:MM:SS:CC"; $this->FormatDefaut = "JHHMMSSLLL"; } function Fb9088766($pszMemorise) { $pclDuree = ChaineVersDuree( $pszMemorise, $this->FormatMemorise ); $sRetour = GetValeur($pclDuree); unset($pclDuree); return $sRetour; } function F3355e5f9($pszValeur) { return DureeVersChaine( $pszValeur, $this->FormatMemorise ); } function F301cc296($pszValeur) { return DureeVersChaine( $pszValeur, $this->Masque ); } function F6e84afe6($pszAffichee) { if ($this->GetValeurAffichee() !== $pszAffichee) { $pclDuree = ChaineVersDuree( $pszAffichee, $this->FormatMemorise ); $sRetour = GetValeur($pclDuree); unset($pclDuree); return $sRetour; } else { return $this->Fb9088766($this->Valeur); } } function& GetType() { return getRef(20006); } function& __GetType() { $t = TYPEWL_DUREE; return $t; } } class CSaisieRiche extends CSaisie { function CSaisieRiche() { parent::CSaisie(); } function Fd2c2cc01() { return true; } function& GetTexteSansFormat() { FMK_Charge('WL/VM/VM.php',false); return HTMLVersTexte($this->GetValeur()); } } class CJetonDINO extends CObjetComposante { var $m_cszLibelle; var $m_cszBulle; var $m_cszLibelleHTML; var $m_xpiCouleur; var $m_xpiCouleurFond; function CJetonDINO($Valeur=null) { parent::CObjetComposante($Valeur); } function F1b8e122c($Valeur) { if (!isset($Valeur) || parent::F1b8e122c($Valeur)) return $Valeur; $pclInit = new CJetonDINO(); $pclInit->m_Valeur = VersPrimitif($Valeur); return $pclInit; } function& GetBulle() { return $this->m_cszBulle; } function SetBulle($pszVal) { $this->m_cszBulle = $pszVal; } function& GetLibelle() { return $this->m_cszLibelle; } function SetLibelle($pszVal) { $this->m_cszLibelle = $pszVal; } function& GetLibelleHTML() { return $this->m_cszLibelleHTML; } function SetLibelleHTML( $pszVal) { $this->m_cszLibelleHTML = $pszVal; } function& GetCouleur() { return $this->m_xpiCouleur; } function SetCouleur( $pszVal) { Operateur(95,$this->m_xpiCouleur,$pszVal);} function& GetCouleurFond() { return $this->m_xpiCouleurFond; } function SetCouleurFond( $pszVal) { Operateur(95,$this->m_xpiCouleurFond,$pszVal);} }; class CDinoCollectionJeton extends CObjetComposante { var $m_pclChamp = null; function CDinoCollectionJeton($Valeur=null) { parent::CObjetComposante($Valeur); } function& Fa7a15ea0($i) { $null = null; if (!isset($this->m_pclChamp)) { return $null; } if (!isset($this->m_pclChamp->m_tabJetons[$i-1])) { return $null; } if (false === $this->m_pclChamp->F75cd9976($i)) return $null; unset($null); return $this->m_pclChamp->m_tabJetons[$i-1]; } function& operateurSub( $nIndice ) { return $this->Fa7a15ea0(VersPrimitif($nIndice)-1); } function& Fc91f0eb7( $Valeur, $nIndice ) { $pclJeton =& $this->Fa7a15ea0(VersPrimitif($nIndice)-1); return $pclJeton->Fcc4f5b5d($Valeur); } function& GetOccurrence() {$return = count($this->m_pclChamp->m_tabJetons,COUNT_NORMAL); return $return;} function& GetValeur() { return CreerType($Valeur,$this->m_sNomWL,TYPEWL_TABLEAU,$this->m_pclChamp->m_tabJetons); } } class CDINOCouleur extends CObjetComposante { var $Opacite = 255; function CDINOCouleur($Valeur=null) { if (is_string($Valeur) && !empty($Valeur)) { if (is_numeric($Valeur)) { $Valeur = intval($Valeur); } else if ($Valeur[0]==='#' && strlen($Valeur)==7) { $Valeur = substr($Valeur,1); $Valeur = F4f6e8051(hexdec(substr($Valeur,0,2)),hexdec(substr($Valeur,2,2)),hexdec(substr($Valeur,4,2))); } else if (F61bc61eb($Valeur,'rgba(')) { $Valeur = explode(',',substr($Valeur,5,strlen($Valeur)-1-5)); $Valeur = F4f6e8051(inval($Valeur[0]),inval($Valeur[1]),inval($Valeur[2])); $this->Opacite = floatval($Valeur[3]); } else if (F61bc61eb($Valeur,'rgb(')) { $Valeur = explode(',',substr($Valeur,4,strlen($Valeur)-1-4)); $Valeur = F4f6e8051(inval($Valeur[0]),inval($Valeur[1]),inval($Valeur[2])); } else { $Valeur = null; } } parent::CObjetComposante($Valeur); } function F1b8e122c($Valeur) { if (parent::F1b8e122c($Valeur)) return $Valeur; $xValeur =& VersPrimitif($Valeur); if (!is_numeric($xValeur)) return null; $pclInit = new CDINOCouleur(); $pclInit->m_Valeur = $xValeur<0 ? $xValeur : F4f6e8051(Fadb05a7c($xValeur),F88bb47e1($xValeur),F72d1dde6($xValeur)); return $pclInit; } function F0162dfb3() { if ($this->m_Valeur<0) { return ''; } if ($this->Opacite==255) return '#'.$this->GetValeur(); return 'rgba(' . $this->GetRouge() . ','. $this->GetVert() . ','. $this->GetBleu() . ','. ($this->Opacite/255) . ')'; } function& GetRouge() { $return = Fadb05a7c($this->m_Valeur); return $return; } function SetRouge($clVal) { $this->m_Valeur=F4f6e8051($clVal,F88bb47e1($this->m_Valeur),F72d1dde6($this->m_Valeur)); } function& GetVert() { $return = F88bb47e1($this->m_Valeur); return $return; } function SetVert($clVal) { $this->m_Valeur=F4f6e8051(Fadb05a7c($this->m_Valeur),$clVal,F72d1dde6($this->m_Valeur)); } function& GetBleu() { $return = F72d1dde6($this->m_Valeur); return $return; } function SetBleu($clVal) { $this->m_Valeur=F4f6e8051(Fadb05a7c($this->m_Valeur),F88bb47e1($this->m_Valeur),$clVal); } function& GetTeinte() { $return = F338d69bf($this->m_Valeur); return $return; } function SetTeinte($clVal) { $T = $L = $S = 0; F043b1c5e($clCouleur->m_dwColor,$T,$L,$S); $this->m_Valeur=F5e769b88($clVal,$L,$S); } function& GetSaturation() { $return = F8663c22b($this->m_Valeur); return $return; } function SetSaturation($clVal) { $T = $L = $S = 0; F043b1c5e($clCouleur->m_dwColor,$T,$L,$S); $this->m_Valeur=F5e769b88($T,$L,$clVal); } function& GetLuminosite() { $return = F688097ae($this->m_Valeur); return $return; } function SetLuminosite($clVal) { $T = $L = $S = 0; F043b1c5e($clCouleur->m_dwColor,$T,$L,$S); $this->m_Valeur=F5e769b88($T,$clVal,$S); } function& GetOpacite() { $return = $this->Opacite; return $return; } function SetOpacite($clVal) { $this->Opacite=$clVal; } function& GetCouleur() { $return = $this->m_Valeur; return $return; } function SetCouleur($clVal) { $this->m_Valeur=$clVal; } }; ?>