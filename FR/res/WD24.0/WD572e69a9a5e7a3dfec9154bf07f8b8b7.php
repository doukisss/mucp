<?php
//24.0.30.0 IHM/Champ/Interrupteur.php GF
//VersionVI: 01F240077f
//(c) 2005-2012 PC SOFT - Release
 if (!defined('__INC__IHM/Champ/Champ.php')) { define('__INC__IHM/Champ/Champ.php',true); include_once(WB_INCLUDE_PATH.'WD7c939e6867492a5e5416bd4b4327fac0.php'); } class CInterrupteurSelecteurCommun extends CChamp { var $Occurrence; var $m_nNbColonnes; function CInterrupteurSelecteurCommun() { parent::CChamp(); $this->m_nNbColonnes = 1; $this->Occurrence = 1; } function lierVM($sNomVM, $sNomWL, $sNomPHP) { parent::lierVM($sNomVM, $sNomWL, $sNomPHP); for($i=0; $i<$this->Occurrence; ++$i) { new COptionInterrupteur($i+1,$this); } } function SetNbColonnes( $nNbColonnes = null ) { if (isset($nNbColonnes)) $this->m_nNbColonnes = $nNbColonnes; } var $m_tabIndiceJS = null; function Fab76a847($nIndiceServeur) { if ($this->m_nNbColonnes == 1) return $nIndiceServeur; if (!isset($this->m_tabIndiceJS)) $this->m_tabIndiceJS = $this->Fb00843a0(); if (!isset($this->m_tabIndiceJS[$nIndiceServeur-1])) return $nIndiceServeur; return $this->m_tabIndiceJS[$nIndiceServeur-1]+1; } function Fb00843a0() { $m_nNbLignes = floor($this->Occurrence / $this->m_nNbColonnes); $tabRetour = array(); if (($this->Occurrence % $this->m_nNbColonnes) == 0) { for($i=0;$i<$this->Occurrence;$i++) { $tabRetour[] = intval( ($i % $m_nNbLignes) * $this->m_nNbColonnes + $i / $m_nNbLignes ); } return $tabRetour; } { $m_nNbLignes++; $m_tabElements = array(); { $k = 0; for ($i = 0; $i < $this->m_nNbColonnes; $i++) { for ($j = 0; $j < $m_nNbLignes; $j++) { $m_tabElements[$j * $this->m_nNbColonnes + $i] = ($k < $this->Occurrence) ? $k : -1; $k++; } } } { $k = 0; for ($i = 0; $i < $m_nNbLignes; $i++) { for ($j = 0; $j < $this->m_nNbColonnes; $j++) { if ($m_tabElements[$i * $this->m_nNbColonnes + $j] != -1) { $tabRetour[ $m_tabElements[$i * $this->m_nNbColonnes + $j] ] = $k; $k++; } } } } } return $tabRetour; } function& operateurSub( $nIndice1 ) { $sNomPHP = $this->m_sNomPHP . F075ca95b($nIndice1); if (isset($GLOBALS[$sNomPHP])) return $GLOBALS[$sNomPHP]; return $this->GetValI($nIndice1); } function F236bb7fa($bAvecSelection = true) { $sResultat = ""; if($this->Occurrence> 0) { $sResultat .= '<OPTIONS>' . $this->F9adb7cba() . '</OPTIONS>'; } if($bAvecSelection) { $sResultat .= $this->F7b5c0e7a(); } return $sResultat; } function F9adb7cba() { $sResultat= ''; for($i=1; $i<=$this->Occurrence && isset($GLOBALS[$this->m_sNomPHP . $i]); ++$i) { $sResultat .= '<OPTION' . ($GLOBALS[$this->m_sNomPHP . $i]->m_bLibelleRiche ? ' HTML="1"' : '') . '>' . F5e65e3cf($GLOBALS[$this->m_sNomPHP . $i]->pszGetLibelleHTML()) . '</OPTION>' ; } return $sResultat; } function F7b5c0e7a() { return ''; } } class COptionInterrupteur extends CLibelle { var $Interrupteur; var $Indice; function COptionInterrupteur($Indice,&$Interrupteur) { parent::CLibelle(); $this->Indice = $Indice; $this->Interrupteur = $Interrupteur; $this->m_sNomPHP = $Interrupteur->m_sNomPHP . $this->Indice; $GLOBALS[$this->m_sNomPHP] =& $this; $this->m_sNomWL = uniqid($Interrupteur->m_sNomWL,true); $this->Alias = uniqid($Interrupteur->Alias,true); $this->m_bLibelleRiche=true; global $MaPage; $MaPage->WB_AjouteChamp($this->m_sNomWL,$this->Alias,$this,$this->m_sNomPHP); $this->lierVM($MaPage->Nom,$this->m_sNomWL,$this->m_sNomPHP); } function SetValeur($NewVal) { $this->Interrupteur->SetValI($this->Indice,$NewVal); } function& GetValeur() { return $this->Interrupteur->GetValI($this->Indice); } function SetLibelleRiche($NewVal) { $this->m_bLibelleRiche = true; $this->Libelle = $NewVal; if(Feef890d7()) { F2afdeace($this->Interrupteur->m_sNomPHP); } } } class CInterrupteur extends CInterrupteurSelecteurCommun { var $TabValeur; function CInterrupteur() { parent::CInterrupteurSelecteurCommun(); $this->Valeur = false; $this->ValeurInitiale = false; } function IsChecked( $Indice ) { return $this->GetValI($Indice); } function& GetOccurrence() { $nOccurrence = $this->Occurrence; return $nOccurrence; } function SetValeur($NewVal) { $this->Valeur = (bool)$NewVal; if($this->Occurrence > 0) { $this->SetValI(1, $this->Valeur); } } function Ff11ff472($xValeurAffichee) { if (is_array($xValeurAffichee))$xValeurAffichee = isset($xValeurAffichee[1]) ? $xValeurAffichee[1] : ''; return !empty($xValeurAffichee); } function F16d5955d() { return $this->Valeur - 1; } function SetValI( $Indice, $Val ) { if(!isset($this->TabValeur)) { $this->TabValeur = array(); } if ($Indice < 1) return; if ($Indice > $this->Occurrence) return; if ($Indice == 1) { $this->Valeur = (bool)$Val; } else { $this->TabValeur[ $Indice ] = $Val; } if(Feef890d7()) { F694db118($this->m_sNomPHP); } } function& GetValI( $Indice ) { $bRetourParDefaut = false; if ($Indice < 1) return $bRetourParDefaut; if ($Indice > $this->Occurrence) return $bRetourParDefaut; if ($Indice > 1) { if ( !isset( $this->TabValeur[$Indice] ) ) return $bRetourParDefaut; return $this->TabValeur[$Indice]; } return $this->Valeur; } function Fdc05d49f( $ValeurHTTP ) { $this->TabValeur = array(); $this->Valeur = false; if ( is_array($ValeurHTTP)) { foreach ( $ValeurHTTP as $Valeur ) { if ($Valeur!=='') { $this->SetValI( $Valeur, true ); } } } else { $this->SetValI( $ValeurHTTP, true ); } } function& GetType() { return getRef(5); } function F4a917fa4() { return 5; } function F048cc3de() { return $this->GetAlias() . '[]'; } function F7b5c0e7a() { $sResultat = ""; for($i=1;$i<=$this->Occurrence;$i++) { $sResultat .= "<JS>[". $i ."].readOnly=false</JS>"; $sResultat .= "<JS>[". $i ."].disabled=false</JS>"; } for($i=1;$i<=$this->Occurrence;$i++) { $nIndiceJS=$this->Fab76a847($i); $sResultat .= "<JS>[". $nIndiceJS ."].checked="; if(isset($this->TabValeur) && isset($this->TabValeur[$i]) && $this->TabValeur[$i]) { $sResultat .= "true"; } else if($i == 1) { if($this->Valeur) { $sResultat .= "true"; } else { $sResultat .= "false"; } } else { $sResultat .= "false"; } $sResultat .= "</JS>"; } return $sResultat; } } ?>